# 일반 규칙

이 문서는 모든 Unity 프로젝트에서 공통으로 적용되는 환경/규칙/원칙을 정리합니다.

## 문서 범위/분리 기준

- 범용 규칙(모든 Unity 프로젝트 공통)은 이 문서에 기록합니다.
- 프로젝트 특화 규칙/구조는 `Docs/GAME_STRUCTURE.md`(게임 구조) 또는 `Docs/PROJECT_MAP.md`(레포 지도)에 기록합니다.

## Unity 버전

- Unity 6.2 (6000.2.6f2)

## 코드 컨벤션

- C# 4-스페이스 들여쓰기
- Allman braces
- Unity C# 관례 준수
- 코드에서 데이터 모델/변수 네이밍은 camelCase를 사용합니다.
- 코드 식별자(타입/메서드/enum 값)에는 의미가 불명확한 축약 기호(`P1`, `P2` 등)를 사용하지 않습니다.
  - 단계/상태는 의미 기반 이름으로 명명합니다. (예: `TurnStart`, `BoardUpdate`, `Assignment`)

## 데이터 네이밍 규칙

- JSON 키는 snake_case를 사용합니다.
- 코드(C#)에서 JSON 데이터를 매핑한 필드/프로퍼티는 camelCase를 사용합니다.

## 구현/협업 규칙

1. 사용자가 “코드 작업”을 지시하기 전에는 구현을 시작하지 않습니다.
2. 코드 변경 시 기존 시스템과 호환되도록 유지합니다.
3. MCP를 통해 씬/프리팹/Inspector 수정을 진행하기 전에, 반드시 어떤 작업을 진행할지 사용자에게 강조하여 안내합니다.
4. `.meta` 파일은 Unity가 관리하므로 직접 생성하거나 수정하지 않습니다.
5. 질문이나 요구에 대해 의문점/개선점이 있으면 반드시 질문·개선사항을 제시합니다. 답변 이후에도 남아 있으면 해결될 때까지 반복적으로 질문·개선사항을 제시합니다.

## 공통 패턴

- 매니저/컨트롤러는 `public static Instance` 싱글톤 패턴을 사용하며, 중복 생성 시 `Awake`에서 파괴 처리합니다.
- 부팅 흐름은 프로젝트별로 정의하되, `SaCache` 초기화가 필요한 경우 `Bootstrap`에서 수행합니다.
- 데이터 초기화는 `StaticDataManager` 기반의 JSON 로딩 흐름을 사용하며, 실제 데이터 구조는 프로젝트별로 정의합니다.

## 텍스트/로컬라이징

- 모든 질의응답과 설명은 한국어로 작성합니다.
- 모든 텍스트 관련 작업은 반드시 로컬라이징을 고려하며, 코드에 하드코딩된 표현은 사용하지 않습니다.
- 텍스트 스타일을 사용하는 것은 공통 규칙이며, 스타일 이름은 프로젝트별 문서에서 관리합니다.

## 문서 최신화 방법론

- 변경 후 1차 판단: 코드/데이터/씬 변경이 있을 때마다 문서 반영 필요 여부를 먼저 판단하고 사용자에게 고지합니다.
- 문서 분류 기준:
  - 범용 규칙/패턴/컨벤션 변경 → `Docs/GENERAL_RULES.md`
  - 게임 구조/시스템/플로우 변경 → `Docs/GAME_STRUCTURE.md`
  - 파일 위치/역할/진입점 변경 → `Docs/PROJECT_MAP.md`
- 작업 단위 루틴: 변경 목록 확인 → 문서 반영 여부 판단 → 필요한 문서 즉시 갱신(불필요 판단도 1줄 기록).
- 완료 조건: 모든 변경 작업은 “문서 업데이트 여부 확인”을 완료 조건에 포함합니다.
- 정기 점검: 스프린트/월말에 `Docs/PROJECT_MAP.md` 기준으로 코드와 1회 정합성 점검을 수행합니다.
- 의사결정 로그: 채택/보류/기각 결론이 난 기획 판단은 근거와 함께 `Docs/GAME_IDEA_BACKLOG.md`의 `설계 결정 로그`에 남깁니다.

## 개발 원칙(실수 방지)

- Input System을 사용합니다. (OnMouseDown / 레거시 마우스 입력 기반 구현 금지)
- 새 패키지/의존성 추가가 필요하면 먼저 사용자에게 요청합니다.
- 변경은 작게 쪼개고, 검증 가능한 단위로 진행합니다.
- 랜덤은 UnityEngine.Random이 아닌 System.Random을 사용합니다.
