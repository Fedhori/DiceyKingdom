# 게임 아이디어 백로그 (vNext)

이 문서는 **확정 전 아이디어 저장소**입니다.
확정 규칙은 `Docs/GAME_STRUCTURE.md`를 기준으로 합니다.

## 운영 규칙

- 상태 태그
  - `[아이디어]`: 검토 전
  - `[검토중]`: 장단점 분석 중
  - `[채택]`: 구조 문서 반영 완료
  - `[보류]`: 재미는 있으나 우선순위 낮음
  - `[기각]`: 이번 사이클 미적용
- 수치가 중요한 항목도, 핵심 파라미터 고정 전까지는 **기믹/조건/리스크** 위주로 기록한다.

## 설계 결정 로그

### 2026-02-10 - 대규모 기획 전환

- 이전 실험 축: `Adventurer/Enemy` 전투형 루프
- 전환 축: `Dice/Situation` 분배형 루프
- 전환 이유:
  - 핵심 재미를 "우선순위/분배/조정"에 집중
  - 왕국 경영 판타지와 시스템 표현 일치 강화
- 백업 위치:
  - `Docs/Backup_Adventurer/*`
- 상태:
  - `[채택]`

### 2026-02-10 - 턴 정산 규칙 잠금

- 결정:
  - `deadline`은 턴 종료 정산에서 감소
  - 감소 후 `deadline <= 0`이면 즉시 실패 처리
  - 성공/실패 효과 적용 순서는 `board_order` 순차 고정
  - `board_order`는 인덱스 기반으로 관리하고, 상황 제거 시 자동 재정렬
  - 성공 보상은 획득 즉시 사용 가능
  - `Defense`/`Stability` 피해 대상은 상황별 효과에서 개별 정의
  - 피해/회복 대상 필드는 `target_resource` enum(`defense | stability`)으로 고정
- 이유:
  - 오프바이원 혼선을 줄이고, 처리 결과의 예측 가능성을 확보
  - 동시 다발 효과 충돌 시 재현 가능한 단일 순서 보장
- 상태:
  - `[채택]`

### 2026-02-10 - 상황 효과 스키마 1차 잠금

- 결정:
  - `effect_type`를 enum으로 고정
  - v1 `effect_type`: `resource_delta`, `gold_delta`, `demand_delta`, `deadline_delta`, `resource_guard`
  - 타입별 필수 키를 고정하고, 조건부 키(`target_mode=by_tag` -> `target_tag`)를 명시
  - `board_order`는 보드 상태 변경 시마다 즉시 재인덱싱
  - `external/internal`은 태그로 사용하지 않음
  - `target_resource`가 있는 성공/실패 효과는 UI에서 영향 아이콘을 함께 표시
- 이유:
  - 효과 해석의 일관성을 확보하고 데이터 누락/오해를 줄이기 위함
  - 구현 단계에서 조건 분기 폭발을 방지하기 위함
- 상태:
  - `[채택]`

### 2026-02-10 - v0 초기값/턴 파라미터 잠금

- 결정:
  - 초기값: `Defense 5`, `Stability 5`, 시작 주사위 `10`
  - 시작 `Advisor` 슬롯: `4`
  - 시작 `Advisor` 보유: 전체 6개 풀에서 랜덤 3개
  - 시작 `Decree` 슬롯: `3`
  - 시작 `Decree` 보유량: 랜덤 `2`개
  - Gold 시스템(v0): 비활성 (`획득/소비/관련 효과` 제외)
  - 턴 파라미터: 보유 주사위 전체 리필, `1/5/9...` 턴 시작 위험예산 스폰, 전체 랜덤 풀/중복 허용, 동시 Situation 상한 없음
  - 주사위 분배 제한 없음, 미배치 허용, 롤/조정 단계 재할당 불가
  - v0 스폰 풀에서 `opportunity`는 제외
  - 각 Situation은 `risk_value`(실수형, v0 범위 `100.0 ~ 500.0`)를 가지며, 스폰은 위험예산 범위 기준으로 결정
  - 위험예산 `budget`은 성장형이 아닌 고정값 `2000.0`으로 운영
  - 스폰 추첨은 가중치 없는 균등 추첨으로 고정
  - 스폰 중 누적 위험가치가 예산을 초과하는 카드를 뽑는 순간 즉시 종료(재추첨 없음)
  - 위험예산 스폰 결과는 로그(`budget`, 누적 사용량, 스폰 수)로 노출
- 이유:
  - UI/UX 폴리싱보다 핵심 사이클 체감 검증을 우선하기 위함
  - 실험 강도를 높여 재미 신호 유무를 빠르게 판별하기 위함
- 상태:
  - `[채택]`

### 2026-02-10 - Advisor/강화 후보 초안 추가

- 결정:
  - 아래 6개 Advisor 효과를 v0 규칙으로 채택
    - `godfather`: 사용 시 `Stability -1`, 선택 Situation `demand -10`, `cooldown 1`
    - `diplomat`: 선택 Situation `deadline +1`(상황당 1회), `cooldown 4`
    - `jester`: 값이 `1`인 주사위 1개를 `6`으로 변경, `cooldown 1`
    - `knight`: 주사위 1개 `+2`, `cooldown 2`
    - `sage`: 선택 Situation에 할당된 주사위 전부 리롤, `cooldown 2`
    - `blacksmith`: 선택 Situation에 할당된 주사위 전부 `+1`, `cooldown 3`
  - Advisor 사용 타이밍은 전 단계에서 허용
  - Decree 사용 타이밍도 전 단계에서 허용
  - 동일 Situation에 한 턴 내 다중 Advisor 적용 허용
  - 시작 Advisor 선정은 중복 비허용
  - `godfather`는 추가 사용 조건 없이 적용
  - `sage`/`blacksmith`는 영향 대상 주사위 수 상한 없이 적용
  - `demand`가 감소하면 즉시 성공 판정을 수행
  - 주사위 강화:
    - 런 시작 시 전체 주사위 중 랜덤 3개를 강화 대상으로 지정
    - 시작 강화 선정은 중복 허용
- 상태:
  - `[채택]`

### 2026-02-10 - Dice Upgrade 조건 타입 잠금

- 결정:
  - v0에서도 `conditions`를 사용한다.
  - v0 허용 조건 타입/트리거는 별도 whitelist로 관리한다.
  - 강화 1개당 조건은 1개만 허용한다. (복수 조건 미지원)
- 이유:
  - 강화 설계를 데이터 기반으로 확장하되, 복수 조건으로 인한 복잡도는 제한하기 위함
- 상태:
  - `[대체됨]` (2026-02-11 Dice Upgrade 풀 최종 확정으로 대체)

### 2026-02-10 - v0 Gold 시스템 제외

- 결정:
  - v0 재미 검증 범위에서 Gold 시스템을 제외한다.
  - Gold 획득/소비/`gold_delta` 효과를 v0 데이터에서 제거하거나 다른 효과로 치환한다.
  - Decree 풀은 Gold 비의존 효과로만 구성한다.
- 이유:
  - 현재 검증 목표가 "우선순위/분배/조정" 핵심 루프이며, 경제 계층은 잡음을 늘릴 수 있기 때문
- 상태:
  - `[채택]`

### 2026-02-10 - 위험값 환산/턴 효과 규칙 잠금

- 결정:
  - `deadline_delta(-1)`은 랜덤 대상 효과만 사용
  - `on_turn_start_effects` 적용 시점은 턴 시작으로 고정
  - 실패 시 Situation은 즉시 제거(성공 보상 없음)
  - `rebel_cells`는 턴 시작마다 `demand_delta(+3)`를 적용(상한 없음)
  - `all_other_situations` 대상 계산은 효과 실행 시점 기준으로 고정(자기 자신 제외, 이미 제거된 Situation 제외)
  - 위험값 빠른 환산: `demand +1` 기본 `+6`, `deadline_delta(-1 random)`은 `+120` 가중
- 이유:
  - 위험값 산정의 "감 의존"을 줄이고, 카드 간 상대 난이도 비교를 일관화하기 위함
  - 실패/틱 효과의 처리 시점을 고정해 예측 가능성을 확보하기 위함
- 상태:
  - `[채택]`

### 2026-02-10 - plague_outbreak 초안 조정

- 결정:
  - `plague_outbreak`의 `demand`를 `18 -> 14`로 하향
  - 실패 효과를 `Stability -2`, `demand_delta(+2) on all other situations`로 변경
  - 위험값을 `305.0 -> 355.0`으로 상향 조정
- 이유:
  - 단일 카드 난이도보다 "실패 시 보드 전반 압박 증가"라는 역할을 명확히 하기 위함
- 상태:
  - `[채택]`

### 2026-02-10 - noble_conspiracy 성공 효과 변경

- 결정:
  - `noble_conspiracy` 성공 효과를 `Gold +1`에서
    `deadline_delta(+1) on random other situation`으로 변경
  - `random other situation` 대상이 없으면 효과는 무효(no-op) 처리
- 이유:
  - v0 Gold 시스템 제외 원칙에 맞추고,
    성공 시 다른 Situation 압박을 완화하는 보상 방향으로 전환하기 위함
- 상태:
  - `[채택]`

### 2026-02-10 - Situation 골드 치환안 확정 (D2-1)

- 결정:
  - `nomad_raid` 성공: `Defense +1`
  - `grain_warehouse_loot` 성공: `Stability +1`
  - `orc_incursion` 성공: `Defense +2`
  - `smuggling_ring` 실패: `Stability -2`
  - `smuggling_ring` 성공: `Stability +1`
- 이유:
  - v0 Gold 시스템 제외 원칙을 유지하면서도
    성공/실패의 즉각 체감을 `Defense/Stability` 축으로 통일하기 위함
- 상태:
  - `[채택]`

### 2026-02-10 - Decree 풀 확정 (D2-3)

- 결정:
  - 아래 5개를 v0 Decree 풀로 확정
    - `total_censorship`
    - `fortify_walls`
    - `efficient_bureaucracy`
    - `time_extension`
    - `focused_support`
  - 이전 후보 중 `forced_march`, `public_relief`, `royal_mobilization`, `chain_of_command`, `kings_edict`는 제외
- 이유:
  - Gold 비의존/부정효과 없음 원칙을 유지하면서,
    v0 핵심 의사결정(보호/기한조작/요구치감소/배치주사위보정)에 집중하기 위함
- 상태:
  - `[채택]`

### 2026-02-10 - Advisor 6종 파라미터 확정 (D2-2)

- 결정:
  - `godfather`: `Stability -1`, 선택 Situation `demand -10`, `cooldown 1`
  - `diplomat`: 선택 Situation `deadline +1`(Situation당 1회), `cooldown 4`
  - `jester`: 값 `1`인 선택 주사위를 `6`으로 변경, `cooldown 1`
  - `knight`: 선택 주사위 `+2`, `cooldown 2`
  - `sage`: 선택 Situation 할당 주사위 전부 리롤, `cooldown 2`
  - `blacksmith`: 선택 Situation 할당 주사위 전부 `+1`, `cooldown 3`
- 이유:
  - v0 핵심 축(분배/조정)의 체감을 빠르게 검증하기 위한 최소 고정 파라미터 세트
- 상태:
  - `[채택]`

### 2026-02-11 - Dice Upgrade 풀 최종 확정 (D2-4)

- 결정:
  - 아래 6개를 v0 Dice Upgrade 확정 풀로 잠금
    - `steady_bonus`: 조건 없음, `die_face +1`
    - `one_to_six`: `die_face_eq(1)`일 때 `die_face = 6`
    - `deadline_surge`: `assigned_situation_deadline_lte(1)`일 때 `die_face +2`
    - `pack_bonus`: `assigned_dice_count_in_situation_gte(3)`일 때 `die_face +2`
    - `critical_six`: `die_face_eq(6)`일 때 `die_face x2`
    - `solo_bonus`: `assigned_dice_count_in_situation_lte(1)`일 때 `die_face +2`
  - 허용 조건/트리거 whitelist:
    - `assigned_situation_deadline_lte`
    - `die_face_lte`, `die_face_eq`, `die_face_gte`
    - `assigned_dice_count_in_situation_gte`, `assigned_dice_count_in_situation_lte`
    - `player_defense_lte`, `player_defense_gte`
    - `player_stability_lte`, `player_stability_gte`
    - `board_order_first`, `board_order_last`
    - `on_resolve_success`
  - 강화 1개당 조건/트리거는 1개만 허용
- 이유:
  - 무조건 발동/상황 조건/주사위 조건/배치 조건을 균형 있게 섞어 v0 검증 다양성을 확보하기 위함
- 상태:
  - `[채택]`

### 2026-02-11 - Dice Upgrade 백로그 후보 추가

- 결정:
  - 아래 4개를 차기 후보로 백로그에 추가
    - `board_order_last`일 때 `die_face +2`
    - `on_resolve_success` 시 `gold +1` (v0 범위 외: Gold 비활성)
    - `player_defense_lte(2)`일 때 `die_face +2`
    - `player_stability_lte(2)`일 때 `die_face +2`
- 이유:
  - v0 1차 플레이테스트 후 난이도/변동성 조절 카드로 빠르게 실험하기 위함
- 상태:
  - `[아이디어]`

### 2026-02-11 - Dice Upgrade 발동 시점 규칙 확정 (D3-1)

- 결정:
  - 강화 발동 타입을 2종으로 확정
    - `roll_once_after_roll`: 주사위를 굴린 직후 1회 적용
    - `recheck_on_die_face_change`: 주사위 눈이 바뀔 때마다 재검증
  - `roll_once_after_roll` 적용 강화
    - `steady_bonus`, `deadline_surge`, `pack_bonus`, `solo_bonus`
  - `recheck_on_die_face_change` 적용 강화
    - `one_to_six`, `critical_six`
- 이유:
  - "롤 직후 1회형"과 "눈 변경 반응형"을 분리해 규칙 가독성과 실제 플레이 체감을 동시에 확보하기 위함
- 상태:
  - `[채택]`

### 2026-02-11 - `critical_six` 반복 배수 규칙 잠금

- 결정:
  - `critical_six`은 조정 단계에서 주사위가 다시 `6`이 될 때마다 `x2`를 반복 적용한다.
  - 턴당 1회 제한, 예외처리, 안전장치는 두지 않는다.
- 이유:
  - 규칙 단순성과 예측 가능성을 유지하고, 예외 분기로 인한 구현 복잡도를 줄이기 위함
- 상태:
  - `[채택]`

### 2026-02-11 - D3-2 유효하지 않은 타겟 처리 규칙 잠금

- 결정:
  - 유효하지 않은 타겟은 UI 입력 단계에서 차단한다.
  - 비정상 경로 시전은 `no-op` 처리한다.
  - 유효하지 않은 시전/no-op에서는 쿨다운/소모품/부가비용을 소모하지 않는다.
  - 타겟 타입 불일치(`selected_die` vs `selected_situation`)는 선택 단계에서 차단한다.
  - 실효 0 시전(`sage`/`blacksmith` on 할당 주사위 0개 Situation)은 차단한다.
  - `diplomat` Situation당 1회 제한 초과 재시전은 차단 + 미소모.
  - 플레이어 발동 `random_other_situation` 대상이 없으면 `no-op` + 미소모.
  - 피드백은 토스트 1줄 + 대상/버튼 붉은 플래시로 고정한다.
  - invalid 상세 사유코드 디버그 로그는 남기지 않는다. (v0)
- 이유:
  - 입력 단계에서 실수를 줄이고, 런타임 예외를 단순한 no-op으로 흡수해 규칙 일관성과 플레이어 예측 가능성을 유지하기 위함
- 상태:
  - `[채택]`

### 2026-02-11 - D3-3 `demand` 감소/성공 판정 경로 잠금

- 결정:
  - `demand` 감소는 이벤트 발생 즉시 반영한다. (분배/Advisor/Decree 공통)
  - `demand` 값이 바뀔 때마다 즉시 성공 판정을 수행한다.
  - 다중 대상 효과는 실행 시점 `board_order` 순차로 처리한다.
  - 성공 시 성공 효과 즉시 적용 + Situation 즉시 제거 + `board_order` 즉시 재정렬.
  - 이미 제거된 Situation을 참조하는 후속 효과는 `no-op` 처리.
  - 오버킬 초과 감소분은 폐기(이월 없음).
  - 연쇄 처리(성공/효과 유발)는 FIFO 큐로 빈 큐까지 처리.
  - `demand`는 음수 값을 허용한다. (`0` clamp 없음)
- 이유:
  - 즉시 피드백/예외 최소화 원칙을 유지하면서 처리 순서를 단일 규칙으로 통일하기 위함
- 상태:
  - `[채택]`

### 2026-02-11 - D3-4 `board_order` 재인덱싱 트리거 잠금

- 결정:
  - `board_order` 재인덱싱은 생성/제거/순서변경 직후 즉시 수행한다.
  - Situation이 성공/실패로 제거되는 순간 바로 `0..n-1`로 재인덱싱한다.
  - 빈 인덱스/중복 인덱스를 허용하지 않는다.
- 이유:
  - 순차 처리 규칙(`board_order`)의 예측 가능성을 유지하고, 후속 효과 타겟팅 혼선을 방지하기 위함
- 상태:
  - `[채택]`

### 2026-02-11 - D4(테스트 잠금) 제거, 구현 우선 전환

- 결정:
  - `V0_MILESTONE`의 D4(테스트 잠금) 단계를 제거한다.
  - 문서 기준 우선순위를 "프로토타입 구현 완료"로 재정렬한다.
  - 테스트 로그/판정 질문 세트는 구현 완료 후 필요 시 별도 문서에서 다룬다.
- 이유:
  - 현재 목표가 검증 준비보다 플레이 가능한 코어 루프 구현이기 때문
- 상태:
  - `[채택]`

### 2026-02-11 - `pressure_type` 및 압박 분류 태그 제거

- 결정:
  - Situation 데이터에서 `pressure_type` 필드를 제거한다.
  - Situation `tags`에서 `urgent_pressure`, `attrition_pressure`를 사용하지 않는다.
- 이유:
  - 압박 분류를 시스템 규칙으로 고정하지 않고, 카드별 효과/수치 자체로 역할을 표현하기 위함
- 상태:
  - `[채택]`

---

## 활성 아이디어

### 1) 주사위 강화: 촉박 대응형 보정

- 상태: `[아이디어]`
- 요약: "턴이 1 남은 상황에 사용 시 해당 눈 +1"
- 좋은 점:
  - 마감 임박 상황에서 판단 포인트를 명확히 만든다.
- 나쁜 점:
  - 턴 압박 상황에서 사실상 고정 선택이 될 수 있다.
- 놓친 점:
  - 마감 판정 시점이 고정되지 않으면 체감이 흔들린다.
- 개선 제안:
  - 특정 상황 1회 제한 또는 강화 희소도로 정답화 방지.
- 질문:
  1. 강화 효과는 "할당 시" 트리거인가, "확정 시" 트리거인가?

### 2) 조언자: 외교관

- 상태: `[아이디어]`
- 요약: 지정 상황 `deadline +1`, 상황당 1회, 쿨다운 4
- 좋은 점:
  - 실패 직전 위기를 되돌리는 극적 선택을 만든다.
- 나쁜 점:
  - 강하면 기한 압박 시스템 자체가 무력화된다.
- 놓친 점:
  - 기한 0 이하 상태에서도 사용 가능한지 미정.
- 개선 제안:
  - `deadline >= 1` 조건에서만 사용 허용.
- 질문:
  1. 외교관은 특정 태그에만 쓰이게 제한할지?

### 3) 칙령: 완전 검열

- 상태: `[아이디어]`
- 요약: 이번 턴 `Stability` 감소 무효
- 좋은 점:
  - 안정 붕괴 위기의 즉시 대응 수단이 된다.
- 나쁜 점:
  - 타이밍만 맞추면 안정 위기 페널티를 통째로 무시할 수 있다.
- 놓친 점:
  - 여러 감소 이벤트가 연속 발생할 때 합산/순차 처리 기준이 필요하다.
- 개선 제안:
  - "이번 턴 첫 Stability 감소만 무효" 하위 버전도 테스트 후보로 유지.
- 질문:
  1. 이 칙령은 안정도 회복과 동시에 쓰일 때도 무효만 적용할지?

### 4) 상황: 유목민 약탈 (위기)

- 상태: `[아이디어]`
- 요약: 짧은 기한, 비교적 낮은 요구치, 실패 시 `Defense` 손실
- 좋은 점:
  - 빠른 우선순위 결정을 강제한다.
- 나쁜 점:
  - 동턴 상황이 많으면 사실상 강제 실패 카드가 된다.
- 놓친 점:
  - 같은 턴에 다수 생성될 때 완화 장치가 필요하다.
- 개선 제안:
  - 출현 빈도 상한 또는 동시 생성 제한.
- 질문:
  1. "유목민"은 시즌/지역 조건부 등장으로 제한할지?

### 5) 상황: 운하 건설 (기회)

- 상태: `[아이디어]`
- 요약: 고요구치/중기한 투자형 상황, 성공 시 구조물 획득
- 좋은 점:
  - 단기 생존 vs 장기 성장 갈등을 만든다.
- 나쁜 점:
  - 실패 페널티가 약하면 무조건 시도 카드가 될 수 있다.
- 놓친 점:
  - 기회 상황 비율이 높아지면 전체 톤이 느슨해진다.
- 개선 제안:
  - 기회 상황은 선택 이벤트로만 등장시키고 기본 풀에는 낮은 확률 배치.
- 질문:
  1. 기회 상황은 일반 상황 슬롯을 공유할지, 전용 슬롯을 둘지?

### 6) 턴=계절 컨셉

- 상태: `[검토중]`
- 요약: 봄/여름/가을/겨울이 턴 순환 테마로 진행
- 좋은 점:
  - 세계관 몰입과 장기 리듬(사계절 패턴) 설계가 쉬워진다.
- 나쁜 점:
  - 계절 효과가 강하면 학습량이 급격히 증가한다.
- 놓친 점:
  - 계절 길이와 상황 생성 규칙이 미정이다.
- 개선 제안:
  - 1차는 UI 표현만 적용하고, 시스템 효과는 보류.
- 질문:
  1. 계절 효과를 초기에 끌지/켤지(옵션) 여부?

### 7) 주사위 강화: 롤 후 배치 위치 변경

- 상태: `[아이디어]`
- 요약: 롤 이후, 해당 강화가 붙은 주사위는 다른 Situation으로 재할당 가능
- 좋은 점:
  - 배치 실수를 일부 복구해 억까 체감을 낮춘다.
  - 마감 대응에서 즉흥적 역전 수를 만든다.
- 나쁜 점:
  - 분배 단계의 핵심 긴장(선결정 책임)을 약화시킬 수 있다.
  - 강하면 사실상 "안전한 후결정권"이 되어 정답화 위험이 있다.
- 놓친 점:
  - 재할당 가능한 타이밍(조정 단계 전체 vs 1회 즉시)이 미정이다.
  - 이동 후 기존 Situation/새 Situation의 조건 재평가 규칙이 미정이다.
- 개선 제안:
  - 1차안: 턴당 1회, 주사위 1개만 이동 허용.
  - 2차안: `assigned_situation_deadline_lte(1)`일 때만 이동 허용.
- 질문:
  1. 이동 가능 시점을 조정 단계 전체 자유 이동으로 열지, "즉시 1회 이동"으로 제한할지?

---

## 고위험 패턴 감시 목록

1. `무쿨다운 + 턴당 무제한 + 저비용` 조합
- 리스크: 분배 게임성 붕괴, 조정 단계 정답화

2. 조정 단계 과잉 개입
- 리스크: 롤 운용 재미보다 후처리 퍼즐이 중심이 됨

3. 상황 동시 과밀
- 리스크: 전략 난이도가 아니라 처리 피로가 먼저 증가

4. 이중 체력(Defense/Stability) 과잉 분기
- 리스크: 직관 저하, 신규 유저 이탈

---

## 다음 논의를 위한 핵심 질문 (반복 점검)

1. 한 턴 최대 동시 상황 수의 상한을 둘 것인가?
2. 조언자 슬롯(예: 4)과 칙령 슬롯(예: 3)을 초기부터 고정할 것인가?
3. 상황 효과 데이터 스키마(대상/수치/조건)를 어떤 형태로 표준화할 것인가?
4. `deadline` 증가/고정/정지 같은 예외 효과 허용 범위를 어디까지 열 것인가?
5. 기회 상황은 일반 상황 슬롯을 공유할 것인가, 별도 슬롯으로 분리할 것인가?

