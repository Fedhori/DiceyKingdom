# 게임 구조

이 문서는 DiceyKingdom의 게임 구조/시스템/런타임 흐름을 정리합니다. 레포 지도는 `Docs/PROJECT_MAP.md`, 범용 규칙은 `Docs/GENERAL_RULES.md`를 참고합니다.

## 문서 범위/분리 기준

- 범용 규칙/컨벤션: `Docs/GENERAL_RULES.md`
- 레포 지도(파일 위치/책임 요약): `Docs/PROJECT_MAP.md`
- 아이디어 문서: `Docs/GAME_IDEA.md`
- 상황 컨셉/대응 요약: `Docs/ENEMY_ROSTER.md`
- 상황 상세 규칙: `Docs/SITUATION.md`
- 요원 상세 규칙: `Docs/AGENT.md`
- 스킬 상세 규칙: `Docs/SKILL.md`
- 칙령 상세 규칙: `Docs/DECREE.md`
- 이 문서: 실제 구현 기준이 되는 게임 구조, 시스템, 데이터/씬 흐름

## 프로덕트 요약 (한 줄)

- 2D 판타지 왕국의 왕이 되어, 매 턴 주사위를 분배해 위기를 관리하는 턴제 로그라이크 경영 게임.

## 현재 개발 단계(중요)

- 기준일: 2026-02-11
- 현재 최우선 목표는 "완성 기획 고정"이 아니라 "핵심 컨셉 검증용 플레이어블 v0 빌드" 제작입니다.
- 핵심 검증 가설:
  - 결과가 불확실한 자원을 분배하는 행위 자체가 반복 플레이에서 재미를 제공하는가
- 1차 검증 기준(확정):
  - 플레이 중/종료 후 "재미 신호"가 명확하게 감지되는가
  - 약 `10`회 플레이에서도 재미 신호가 거의 없으면 아이디어를 중단 후보로 판정
- v0 가드레일(확정):
  - 분배 단위를 요원으로 실험할 경우, 단위 수는 `4`로 고정
  - 스킬 최소 세트 3종을 기본 보유로 시작
    - 원하는 요원 리롤(쿨다운 `1`)
    - 원하는 주사위 눈 +1(쿨다운 `1`)
    - 지정 상황 약화 -2(레거시 effectType: `situationRequirementDelta`, 쿨다운 `2`)
  - 모든 스킬은 개별 쿨다운을 가지며, 각 스킬은 턴당 `1`회만 사용 가능
  - 검증 초점은 "요원 <-> 스킬 시너지의 재미 체감"으로 둠
- 실험 전략(확정):
  - `선택지 A` 적용: 분배 단위만 요원으로 전환하고, 진행 구조는 기존 연속 누적 턴 보드를 유지
  - 이번 사이클에서는 단일 빌드로 플레이테스트 수행
  - 스테이지 단위 + 준비시간 액션 구조는 차기 사이클 후보로 보류
  - 세션 평가는 코드 로그가 아닌 플레이어 수동 피드백으로 진행
- 문서 내 기존 세부 규칙/수치/용어는 참고 베이스라인이며, v0 결과에 따라 구조적 변경(예: 분배 단위/보드 구조) 가능성이 열려 있습니다.
- 충돌 시 우선순위:
  - v0 검증 목표 > 기존 상세 규칙

### 2026-02-12 주사위 대결 전환 규칙(최신 우선)

- 기존 `요구치(Requirement)를 공격(ATK)으로 감소`하는 전투 루프를 폐기합니다.
- 전투는 `주사위 대결`로 처리합니다.
  - 에이전트와 상황은 각각 `1개 이상`의 주사위를 보유합니다.
  - 플레이어는 처리 중인 에이전트의 주사위 `1개`를 선택하고, 상황의 주사위 `1개`를 선택해 테스트합니다.
  - 양쪽 주사위를 굴려 `에이전트 눈 >= 상황 눈`이면 성공, 해당 상황 주사위를 파괴합니다.
  - 실패여도 대상 상황 주사위 면수(`dX`)를 `X -= 에이전트 눈`만큼 감소시킵니다.
  - 실패 감소 결과가 `0` 이하이면 해당 상황 주사위를 즉시 파괴합니다.
  - 테스트 시도 시 에이전트 주사위는 성공/실패와 무관하게 소모됩니다.
  - 상황 주사위가 `0`개가 되는 즉시 해결(보상 적용 + 제거)합니다.
  - 처리 중 에이전트의 주사위를 모두 소모하면 해당 에이전트는 소진됩니다.
- 턴 종료 정산의 `기한(Deadline) / 실패 효과(Failure Effect)` 규칙은 유지합니다.
- 데이터 스키마 전환:
  - `AgentDef.diceCount` -> `AgentDef.diceFaces: int[]`
  - `SituationDef.baseRequirement` -> `SituationDef.diceFaces: int[]`
  - `AgentState.rolledDiceValues` -> `AgentState.remainingDiceFaces`
  - `SituationState.currentRequirement` -> `SituationState.remainingDiceFaces`
- 스킬/룰은 이 전환 단계에서 임시 비활성화합니다(후속 재설계 예정).
- 이 절은 문서의 기존 `요구치/공격/ATK` 중심 서술보다 우선합니다.

### 2026-02-11 우선순위 리워크 규칙(확정)

- `Enemy(몬스터)` 용어를 `Situation(상황)`으로 전환합니다.
- 상황은 `기한(Deadline)`, `성공 시 보상(Success Reward)`, `실패 시 효과(Failure Effect)`를 가집니다.
- 상황의 `행동(Action)` 및 `행동 풀(actionPool)` 시스템은 v0 범위에서 사용하지 않습니다.
- 상황 상세 규칙(생성/성공/실패/잔류 모드)은 `Docs/SITUATION.md`를 단일 기준으로 관리합니다.

### v0 구현 범위(확정)

- 포함:
  - 분배 단위를 요원으로 전환
  - 요원 수 `4` 고정
  - 스킬 3종 기본 보유(리롤 CD1, 눈 +1 CD1, 상황 약화 -2 CD2, 현재 전환 단계에서는 사용 비활성)
  - 스킬 규칙: 개별 쿨다운 + 각 턴당 스킬별 1회 사용
  - 전투 계산: 요원 주사위와 상황 주사위를 `1:1` 대결해 상황 주사위를 파괴
  - 기존 연속 누적 턴 보드 구조 유지
  - 런 종료 조건 `Stability <= 0`
- 제외:
  - v0 보상 시스템(처치 보상/스테이지 보상)
  - 스테이지 단위 + 준비시간 액션 구조
  - 요원 수 증가(4->5->6)
  - 확장 성장 시스템/경제 확장/메타 진행
  - 런 종료 설문/자동 로그 수집 기능

### v0 런 파라미터 잠금(확정)

- 초기 안정도(`Stability`)는 `20`으로 고정합니다.
- 초기 골드(`Gold`)는 `0`으로 고정합니다.
- 스타팅 요원 구성(4명)은 `Docs/AGENT.md` 기준으로 고정합니다.
- 상황 생성 고정값(초기 `3`, 4턴마다 `3`, 균등 랜덤, 보드 상한 없음)은 `Docs/SITUATION.md` 기준으로 관리합니다.

### v0 구현 순서

1. 요원 최소 데이터 스키마 정의(굴림 주사위 수, 고유 효과, 장비 슬롯)
2. 요원 배치/전투 루프 신규 구현(템플릿 기본 코드만 존재하므로 치환 작업 없음)
3. 스킬 3종 효과 구현(리롤, 눈 +1, 상황 약화 -2)
4. 스킬 사용 UI/피드백 구현(선택 대상 표시, 사용 가능/쿨다운 상태 표시)
5. 연속 턴 보드에서 상황 주사위/기한 정산이 요원 체계와 맞물리도록 연결
6. 플레이 가능한 빌드 완성 후 사용자 수동 플레이테스트 진행

## 게임 컨셉

- 플레이어는 왕국의 군주로서 매 턴 주사위를 굴리고, 보드에 쌓이는 상황을 대응하며 왕국을 생존시킵니다.
- 핵심 생존 자원은 `안정도`이며, 안정도가 0 이하가 되면 즉시 게임 오버입니다.
- `V1` 진행 목표는 엔딩형이 아닌 생존형(얼마나 오래 버티는지)으로 고정합니다.

## 런 목표(V1 확정)

- `V1` 런 목표는 생존형 1종만 사용합니다.
- 런 종료 조건은 `Stability <= 0`입니다.
- 보스/엔딩/특수 승리 조건은 `V2` 이후 확장 항목으로 분리합니다.

## 용어 사전(확정)

- `Situation` / `상황`
  - 보드에 생성되는 문제/기회 단위
- `Enemy` / `몬스터`
  - 레거시 용어(2026-02-11 이후 신규 설계에서는 사용하지 않음)
- `Skill` / `스킬`
  - 액티브 능력 카테고리(인물 테마)
- `Structure` / `구조물`
  - 영구 패시브 카테고리(건물/시설 테마)
- `Decree` / `칙령`
  - 즉시 사용 소모성 수단
- `Stability` / `안정도`
  - 왕국 생존 자원(0 이하 시 게임 오버)
- `Gold` / `골드`
  - 런 내 공용 경제 통화
- `Health` / `체력`
  - 레거시 용어(요구치로 대체)
- `Requirement` / `요구치`
  - 레거시 용어(2026-02-12 주사위 대결 전환 이후 기본 사용 중단)
- `Deadline` / `기한`
  - 상황이 실패 판정되기까지 남은 턴 수
- `Attack` / `공격`
  - 레거시 용어(요구치 감소형 전투에서 사용)
- `Die Face` / `주사위 면 수`
  - dX에서 X 값(예: d10의 면 수는 10)
- `Tags` / `태그`
  - 상황/효과 분류 키워드(예: 침략, 기근)
- `Run` / `런`
  - 게임 1회 플레이 단위
- `Turn` / `턴`
  - 런 내 최소 진행 단위
- `Phase` / `페이즈`
  - 턴 내부 고정 단계

### 용어 사용 규칙(확정)

- 문서/코드/데이터/UI에서 같은 개념은 항상 동일 용어를 사용합니다.
- 한글 표기 우선, 영문은 괄호로 병기합니다.
- 기존 표현은 점진적으로 `스킬(Skill)`, `구조물(Structure)`, `칙령(Decree)` 기준으로 통일합니다.
- 경제 용어는 `재화` 대신 `골드(Gold)`를 기본 표기로 사용합니다.

## 디자인 철학(확정)

- 목표는 플레이어를 괴롭히는 것이 아니라, 도전적인 난이도에서 시너지 탐색/실험/실현의 성취감을 제공하는 것입니다.
- 난이도와 보상은 함께 설계하며, "어려움만 있고 보상이 없는 상태"를 피합니다.
- 소모품을 한 턴에 집중 사용해 폭발적인 결과를 만드는 플레이는 허용하되, 그 전제는 충분한 희소성과 기회비용입니다.
- 강력한 시너지는 만들기 어렵게 설계하고, 특정 고점 전략이 모든 상황에 통하지 않도록 카운터 기믹을 함께 배치합니다.
- 선택은 흥미로워야 하며, 과도한 복잡도로 인해 피로를 유발하는 설계는 지양합니다.
- 모든 효과는 "한 번 읽고 이해 가능한 단문 규칙"을 우선하며, 길고 조건이 많은 효과는 예외적으로만 허용합니다.

## 씬/런타임 흐름

- 현재 구현 기준: `Bootstrap` -> `GameScene` 진입
- `GameScene`에서 단일 런이 진행되며, 턴 단위로 상황 대응/정산을 반복
- 런 종료 조건: 안정도 0 이하

## 핵심 루프

1. 턴 시작
2. 보드 갱신(상황 생성/만료 대상 확인)
3. 요원 순차 처리 루프
   - 요원 1명 선택
   - 해당 요원 주사위 선택
   - 상황 주사위 선택 후 대결 테스트(성공 시 상황 주사위 파괴, 에이전트 주사위는 항상 소모)
   - 선택한 요원의 주사위를 모두 소모할 때까지 반복
   - 남은 요원이 있으면 반복
4. 턴 종료 정산(미해결 상황 기한 감소, 실패 효과 적용, 안정도/골드 증감)
5. 다음 턴 반복

## 데이터 로딩

- 템플릿은 `SaCache` + `StaticDataManager` 기반의 JSON 로딩 흐름을 제공합니다.
- 현재 연결된 v0 데이터 테이블:
  - `Agents.json`: 요원 정의 + 요원 룰
  - `Situations.json`: 상황 정의 + 상황 주사위/기한/성공·실패 효과
  - `Skills.json`: 스킬 정의
- 상세 필드/규칙은 각 문서에서 관리합니다.
  - 요원: `Docs/AGENT.md`
  - 상황: `Docs/SITUATION.md`
  - 스킬: `Docs/SKILL.md`
  - 칙령: `Docs/DECREE.md` (현재 비활성)

## 저장/로드

- 템플릿은 `SaveService` 기반의 일반 저장/로드 유틸을 제공합니다.
- 런타임 저장 스키마 초안:
  - 현재 턴 수
  - 현재 안정도/최대 안정도
  - 보유 주사위/강화 상태
  - 보유 스킬/쿨다운 상태
  - 보유 구조물
  - 보드 위 상황 상태(남은 상황 주사위/남은 기한/성공·실패 처리 상태)
  - 경제 값(골드)

## UI/UX 공용 시스템

- 모달/토스트/툴팁/플로팅 텍스트는 공용 UI 유틸로 제공됩니다.
- 런 보드 카드/주사위 UI는 프리팹 기반으로 구성합니다.
  - 상황 카드: `Assets/Prefabs/Situation/SituationCard.prefab`
  - 요원 카드: `Assets/Prefabs/Agent/AgentCard.prefab`
  - 주사위: `Assets/Prefabs/Dice/Dice.prefab`
- 런 보드 UI 구조는 `Manager + View`로 분리합니다.
  - 로직/상태 동기화: `SituationManager`, `AgentManager`
  - 카드 렌더/입력 배선: `SituationController`, `AgentController`(각 카드 프리팹 컴포넌트)
- 대결 롤 연출은 카드 개별 연출이 아니라 중앙 오버레이(`DuelOverlayController`)에서만 처리합니다.
- 대결 결과는 중앙 오버레이가 사라진 뒤 보드 상태에 반영합니다.
- 카드 View(`SituationController`, `AgentController`)의 참조 컴포넌트는 인스펙터 직결(`SerializeField`)만 사용합니다.
  - 런타임에서 `GetComponent` 기반 자동 탐색/자동 `AddComponent`로 참조를 보정하지 않습니다.
- `Managers` 루트 하위에 `Agent`, `Situation` 오브젝트를 두고, 각 매니저를 배치합니다.
- 프로토타입 런 보드 카드 텍스트는 `TMP_Text` 직접 바인딩만 사용하며, `LocalizeStringEvent`는 사용하지 않습니다.
- 카드/주사위의 크기, 피벗, 오프셋, 레이아웃 수치는 프리팹(또는 프리팹 인스턴스)에서 관리하고, 코드에서는 상태 바인딩만 담당합니다.
- 런 보드 UI는 매 프레임 폴링(`Update`)으로 상태를 갱신하지 않고, 런타임 이벤트(`RunStarted`, `PhaseChanged`, `StageSpawned`, `RunEnded`, `StateChanged`) 기반으로만 갱신합니다.
- 런 보드 카드 필드/상호작용 상세는 구성 요소 문서로 분리합니다.
  - 상황 카드: `Docs/SITUATION.md`
  - 요원 카드: `Docs/AGENT.md`
  - 스킬 슬롯: `Docs/SKILL.md`

### 상태-UI 동기화 규칙(v0)

- 상단 HUD는 아래 이벤트로 동기화합니다.
  - `RunStarted`: 런 시작 상태 반영
  - `PhaseChanged`: 현재 페이즈 반영
  - `StageSpawned`: 스테이지 번호/프리셋 반영
  - `RunEnded`: 게임오버 상태 반영

## 오디오

- `AudioManager`(SFX), `BgmManager`(BGM) 공용 유틸 제공.

## 난수

- 주사위 굴림은 `System.Random` 기반으로 처리합니다.
- 재현성(디버깅/시드 런)이 필요하므로 런 시작 시 시드를 저장합니다.

## 텍스트 스타일(프로젝트별)

- 기준: `Assets/GlobalTextStyles.asset`
- TODO: 프로젝트 스타일 이름 확정 후 반영

## 핵심 시스템 규칙(초안)

### 안정도
- 왕국의 생존 자원 역할을 수행합니다.
- 상황 실패, 디버프, 이벤트 등에 의해 감소합니다.
- 효과, 유산, 고정 행동(예: 영지 순찰) 등으로 회복할 수 있습니다.

### 주사위(2026-02-12 전환)

- 에이전트/상황 주사위는 모두 `dX` 형태의 면 수로 정의합니다.
  - 예: `6`은 d6, `10`은 d10
- 테스트 시 양쪽 주사위를 각각 1회 굴립니다.
- 성공 판정은 `에이전트 눈 >= 상황 눈`입니다.
- 에이전트 주사위는 테스트 시도 즉시 소모됩니다(성공/실패 무관).
- 성공 시 선택한 상황 주사위 1개가 파괴됩니다.
- 실패 시에도 선택한 상황 주사위 면수(`dX`)가 `X -= 에이전트 눈`만큼 감소합니다.
- 실패 감소 결과가 `0` 이하이면 선택한 상황 주사위를 파괴합니다.

### 구성 요소 상세 문서(분리)

- 상황(Situation): `Docs/SITUATION.md`
- 요원(Agent): `Docs/AGENT.md`
- 스킬(Skill): `Docs/SKILL.md`
- 칙령(Decree): `Docs/DECREE.md`

### 구조물(Structure)
- 런 동안 유지되는 영구 패시브입니다.
- 빌드 방향성과 장기 성능을 결정하는 핵심 성장 축입니다.
- 테마는 건물/시설/설치물 방향으로 고정합니다.

## 턴 처리 규칙(부분 확정)

1. 턴 시작: 보드 상태를 갱신합니다.
2. 요원 처리 루프(요원 수만큼 반복):
   - 처리할 요원을 선택합니다.
   - 해당 요원의 주사위 `1`개를 선택합니다.
   - 대상 상황의 주사위 `1`개를 선택해 대결합니다.
   - 요원 주사위는 항상 소모됩니다.
   - 성공 시 상황 주사위 `1`개를 파괴하고, 실패 시 해당 상황 주사위 면수를 요원 눈만큼 감소시킵니다.
   - 실패 감소 결과가 `0` 이하이면 해당 상황 주사위를 파괴합니다.
   - 현재 요원의 주사위를 모두 소모하면 다음 요원을 처리합니다.
3. 종료 정산(미해결 상황 대상):
   - 미해결 상황의 기한을 1 감소시킵니다.
   - 기한이 0 이하가 된 상황은 실패 효과를 즉시 발동합니다.
   - 실패 기본 동작은 제거입니다(현재 v0에서 실패 잔류 없음).
4. 안정도 0 이하 여부를 판정합니다.

### 턴 최소 사이클 단위(상태머신 부분 확정)

- 용어 정의
  - `Phase`: 턴을 구성하는 고정 단계
  - `Window`: 플레이어가 스킬/칙령 등 능동 효과를 사용할 수 있는 구간
  - `Commit`: 해당 단계 결과가 확정되어 되돌릴 수 없는 지점
- 사이클 정의
  - `P0 TurnStart`
    - 주사위 리필, 스킬 쿨다운 감소, 턴 시작 트리거 처리
    - `Commit`: 리필/쿨다운 결과 확정
  - `P1 BoardUpdate`
    - 보드 상태 갱신(턴 시작형 지속효과 포함)
    - 런 시작 시 초기 상황 `3`개 생성
    - `4`턴마다 상황 `3`개 생성
    - 생성 대상은 상황 풀에서 `균등 랜덤` 선택
    - `Commit`: 이번 턴 보드 구성 확정
  - `P2 AgentRoll`
    - 현재 처리할 요원을 선택합니다.
    - 입력: 요원별 선택 버튼 또는 단축키 `1/2/3/4`
    - 처리 중 요원이 선택되면 다른 요원 선택 입력은 일시 비활성화
    - `Window`: 스킬/칙령 사용 가능
    - `Commit`: 처리 대상 요원 확정
  - `P3 Adjustment`
    - 현재 요원의 사용할 주사위를 선택합니다.
    - 전환 단계에서는 선택/보정 관련 UI 상태를 정리합니다.
    - `Window`: 스킬/칙령 사용 가능
    - `Commit`: 현재 요원 주사위 선택 확정
  - `P4 TargetAndAttack`
    - 대상 상황의 주사위 `1`개를 선택해 대결 테스트를 수행합니다.
    - 중앙 결투 오버레이에서 요원/상황 주사위 롤 연출을 표시합니다.
    - 성공 시 선택한 상황 주사위 `1`개를 파괴합니다.
    - 실패 시에도 선택한 상황 주사위 면수(`dX`)를 `X -= 에이전트 눈`만큼 감소시킵니다.
    - 실패 감소 결과가 `0` 이하이면 해당 상황 주사위를 즉시 파괴합니다.
    - 상황 주사위가 `0`개가 되면 즉시 성공 처리(보상 적용 후 제거)합니다.
    - `Commit`: 현재 요원 주사위 소비/상황 파괴 결과 확정
    - 현재 요원의 주사위가 남아 있으면 `P3`으로, 없으면 다음 요원 처리를 위해 `P2`로 이동합니다.
  - `P5 Settlement`
    - 내부 순서:
      1. 미해결 상황의 기한 1 감소
      2. 기한 0 이하 상황의 실패 효과 발동
      3. 실패 기본 동작은 제거(현재 v0에서 잔류 없음)
    - `Commit`: 턴 결과 확정
  - `P6 EndTurn`
    - 턴 종료형 지속효과 처리, 게임오버 판정
    - 다음 턴으로 이행

### 턴 시작 리필 규칙(확정)

- 플레이어 보유 주사위는 턴 시작 시 전부 리필됩니다.
- 플레이어 보유 스킬의 쿨다운은 턴 시작 시 감소합니다.
- 쿨다운이 0이 된 스킬은 같은 턴에 즉시 사용 가능합니다.

### 행위 규칙 상세(분리)

- 요원 배치/소비/UX 규칙: `Docs/AGENT.md`
- 스킬/칙령 사용 규칙: `Docs/SKILL.md`, `Docs/DECREE.md`

### 골드 저점 규칙(확정)

- 골드는 기본적으로 음수를 허용하지 않습니다.
- 골드는 `최소값(min floor)` 개념을 가지며, 기본 저점은 0입니다.
- 특정 효과(예: 은행형 구조물)는 저점을 일시적으로 음수 구간으로 변경할 수 있습니다.
- `min floor`는 "해당 골드가 내려갈 수 있는 최저선"을 뜻합니다.
- `min floor` 변경 효과가 여러 개일 경우 변화량을 합산합니다.
  - 예: 기본 0, 효과 A(-10), 효과 B(+2) -> 최종 `min floor` = -8

### 실패 효과 처리 순서(확정)

- `P5 Settlement`의 상황 실패 효과는 합산 처리하지 않고 순차 처리합니다.
- 적용 순서는 매 턴 UI 보드 정렬 순서(좌 -> 우, 상 -> 하)로 고정합니다.
- 같은 순서를 실패 로그 UI에도 그대로 표시해 예측 가능성을 유지합니다.

## 턴 파워 예산 vs 위협 예산 변수 프레임(진행중)

- 턴 파워 예산 `P_turn`은 아래 합으로 관리합니다.
  - `P_dice`: 이번 턴 리필 주사위로 즉시 생성 가능한 파워
  - `P_skill_free`: 이번 턴 사용 가능한 무료 Skill 파워
  - `P_skill_paid`: 골드 비용을 지불해 전환 가능한 Skill 파워
  - `P_item`: 이번 턴 사용 가능한 Decree 파워
- 위협 예산 `T_turn`은 아래 합으로 관리합니다.
  - `T_now`: 현재 보드 상황 주사위 총량/면수 기반 위협량
  - `T_deadline`: 기한 압박으로 인한 가중 위협
  - `T_failure`: 기한 만료 시 실패 효과 기대 손실
- 목표 상태:
  - 평균 상황에서는 `P_turn`으로 전부 해결이 아닌 "선택적 해결"이 발생해야 함
  - 고위험 턴에서는 비용형 Skill/Decree로 `P_skill_paid`, `P_item`을 동원해 위기 탈출 가능해야 함
  - 무쿨다운+무비용 조합으로 무한 보정 루프가 생기지 않아야 함
  - Decree 폭발 턴은 허용하되, 상시 재현 가능한 기본 전략이 되지 않도록 희소성/공급량을 관리해야 함

### 예산 평가 우선순위(확정)

- 1순위는 `평균 기대값` 기반으로 파워/위협 균형을 맞춥니다.
- 하한 안전값은 "재시작 접근성"과 "칙령(Decree) 윤활 장치"로 보완합니다.

## 예시 진행(문서화)

- 초기 상태
  - 처리 가능한 요원: `agent.warrior`, `agent.archer`, `agent.mage`, `agent.rogue`
  - 각 요원은 자신의 남은 주사위 목록을 가짐
- 보드 상황
  - `orc_raiders`: 상황 주사위 `[d12, d8]`, 기한 1
  - `locust_swarm`: 상황 주사위 `[d10, d7]`, 기한 2
- 대결 진행
  - `agent.warrior` 선택 -> 보유 주사위 중 하나 선택
  - `orc_raiders`의 `d8` 선택 후 대결
  - 예시 결과: 요원 5 vs 상황 3 -> 성공, `d8` 파괴
  - 같은 방식으로 남은 요원 주사위를 순차 소모하며 우선순위 결정
- 판정
  - 상황 주사위가 모두 파괴된 상황은 즉시 성공 보상 후 제거
  - 남은 상황은 `P5 Settlement`에서 기한 감소/실패 효과 처리
  - 다음 턴에 신규 상황이 추가되면, 어떤 상황을 처리/포기할지 다시 선택

## 밸런스 기준(초안)

- 판단 강도: 매 턴 "모든 문제 해결"이 아니라 "무엇을 포기할지"를 결정하게 설계
- 시너지 가치: 단일 고성능 옵션보다 조합(주사위 강화 + 스킬 + 구조물)이 더 강하도록 설계
- 리스크 관리: 단기 손해를 감수해 장기 성장(구조물/강화)을 선택할 여지를 보장

### 수치 확정 게이트

- 아래 핵심 파라미터가 확정되기 전에는, 신규 아이디어는 수치보다 기믹/상호작용/트레이드오프 중심으로 기록합니다.
  - 스타팅 주사위 수 및 성장 속도
  - 턴당 평균 상황 수/난이도 곡선
  - 스킬/구조물/칙령의 평균 파워 예산

## 아이디어 밸런스 체크리스트(리뷰 기준)

- 전력 곡선: 초반/중반/후반 중 특정 구간만 과도하게 강해지지 않는가
- 선택 다양성: 특정 조합이 사실상 강제되어 빌드 다양성을 해치지 않는가
- 상호작용 리스크: 리롤/배수/오버킬 등과 결합 시 무한 이득 루프가 생기지 않는가
- 실패 허용성: 실수 1회가 즉시 런 파괴로 이어져 복구 불가능해지지 않는가
- 보상 적정성: 난이도 대비 보상이 과소/과대하지 않은가

### 밸런스 판정 라벨

- `오버밸런스`: 평균적인 선택 대비 기대값이 지나치게 높고, 사실상 필수 선택이 되는 상태
- `언더밸런스`: 사용 조건/리스크 대비 기대값이 낮아 선택 동기가 부족한 상태
- `중립(조건부)`: 특정 조건에서만 강하고, 명확한 대가/제약이 있는 상태

## 미해결 설계 질문

- 스테이지 단위 구조를 2차 실험으로 전환할 조건/시점 확정
- 2차 사이클 난이도 상승 규칙(턴당 생성, 상황 주사위 스케일 증가, 기한 압박 중 무엇을 축으로 올릴지)
- 상황 생성 풀의 실제 구성안 확정(상황 조합/기한 압박 분포)
- 상황 다양성 확보를 위한 추가 상황 `2`종 컨셉/역할 확정
- 오버킬 처리 방식(남는 수치 이월 여부 + 오버킬 트리거/보상 규칙)
- 은행형 대출 한도(`N`) 값 확정

## 관련 문서

- 공통 규칙: `Docs/GENERAL_RULES.md`
- 레포 지도: `Docs/PROJECT_MAP.md`
- 아이디어 인덱스: `Docs/GAME_IDEA.md`
- 상황 로스터: `Docs/ENEMY_ROSTER.md`
- 상황 상세: `Docs/SITUATION.md`
- 요원 상세: `Docs/AGENT.md`
- 스킬 상세: `Docs/SKILL.md`
- 칙령 상세: `Docs/DECREE.md`




