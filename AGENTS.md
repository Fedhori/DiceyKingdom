# AGENTS.md

이 문서는 Codex 세션 전반에서 일관되게 지켜야 할 공통 규칙과, 프로젝트 이해에 필요한 최소한의 프로덕트 맥락을 정리합니다.

## 프로덕트 요약 (한 줄)

- 핀볼 기반 로그라이크

## 핵심 루프

- 매 스테이지마다 3번의 라운드를 제공
- 각 라운드마다 보드에 볼들을 소환
- 볼들은 핀들과 만나면 점수를 얻음
- 스테이지 종료 시 목표 점수에 도달하지 못하면 게임 오버
- 매 라운드 종료마다 상점이 열려 플레이어는 핀과 볼을 구매 가능

---

## 전제

- 우리는 Unity 기반 게임을 개발/유지 보수 중입니다. (버전: 6.2 - 6000.2.6f2)
- 기능 구현은 `Assets/Scripts`와 `Assets/StreamingAssets` 구조에 맞춰 진행합니다.
- 코드는 Unity C# 컨벤션(4-스페이스, Allman braces 등)을 따릅니다.
- 데이터는 주로 StreamingAssets의 JSON을 통해 로드됩니다.

## 레포 탐색 규칙(고신호 우선순위)

- 매니저/컨트롤러 수가 많지 않으므로, 우선 아래 파일만 집중적으로 봅니다.
  - `*Manager.cs`
  - `*Controller.cs`
- 추가 정보가 필요할 때만, 위 파일들이 참조하는 DTO/Instance/유틸/데이터 로더를 따라갑니다.
- `Assets/Scripts` 아래를 우선으로 보고, 데이터 정의/밸런스는 `Assets/StreamingAssets`를 확인합니다.

---

## 일반 규칙

1. 사용자가 “코드 작업”을 지시하기 전에는 구현을 시작하지 않습니다.
2. 코드 변경 시 기존 시스템과 호환되도록 유지합니다.
3. 씬/프리팹/Inspector 수정이 필요하면 반드시 사용자에게 강조하여 안내합니다.
4. `.meta` 파일은 Unity가 관리하므로 직접 생성하거나 수정하지 않습니다.

## 추가 지침

- 모든 질의응답과 설명은 한국어로 작성합니다.

## 개발 원칙(실수 방지)

- Input System을 사용합니다. (OnMouseDown / 레거시 마우스 입력 기반 구현 금지)
- 새 패키지/의존성 추가가 필요하면 먼저 사용자에게 요청합니다.
- 변경은 작게 쪼개고, 검증 가능한 단위로 진행합니다.

## 빠른 검증(가능한 최소 동작 확인)

- 메인 게임 플레이 씬에서 Play
- 스테이지 시작 → 3 라운드 진행 → 각 라운드 종료 시 상점 오픈 확인
- 목표 점수 미달 시 게임 오버 확인
- (스폰/스코어/상점 관련 변경 시) 최소 1 스테이지를 끝까지 돌려 확인
