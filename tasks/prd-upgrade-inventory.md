# PRD: 강화 전용 인벤토리

## 1. 소개/개요
현재 강화는 아이템에 귀속되거나 상점에 표시될 때만 존재한다. 플레이어가 강화 아이템을 별도로 관리하고 원하는 아이템에 적용할 수 있도록 “강화 전용 인벤토리”를 추가한다. 이 기능은 상점 단계에서만 열 수 있다.

## 2. 목표
- 강화 인벤토리를 통해 강화의 보관/적용 흐름을 제공한다.
- 아이템 판매 시 강화가 소멸되지 않고 인벤토리로 회수된다.
- 무제한(동적 확장) 강화 슬롯을 지원한다(ScrollView 기반).

## 3. 사용자 스토리
- (플레이어) 상점에서 아이템을 판매하면 강화가 인벤토리로 보관되어 다시 활용하고 싶다.
- (플레이어) 강화 인벤토리에서 강화를 선택하고 유효한 아이템에 적용하고 싶다.
- (플레이어) 강화가 없는 상태를 쉽게 인지하고 싶다(빈 상태 메시지).

## 4. 기능 요구사항
1. 시스템은 상점 단계에서만 강화 인벤토리를 열 수 있어야 한다.
2. 강화 인벤토리는 보유 강화 수에 따라 슬롯이 자동으로 늘어나야 하며, ScrollView로 표시해야 한다.
3. 강화 인벤토리 슬롯은 아이콘만 표시하고, 호버 시 툴팁이 노출되어야 한다.
4. 강화 인벤토리 슬롯의 배경색은 상점과 동일하게 희귀도에 따라 표시해야 한다.
5. 강화 인벤토리가 비어 있으면 “없음” 안내 텍스트를 표시해야 한다.
6. 아이템 판매 시, 해당 아이템에 강화가 붙어 있으면 강화는 인벤토리로 이동해야 한다.
7. 강화 인벤토리에서 강화를 선택하면, 적용 가능한 아이템 슬롯이 하이라이트되어야 한다.
8. 강화 적용 방식은 다음을 모두 지원해야 한다.
   1) 선택한 강화 상태에서 유효한 아이템 슬롯 클릭으로 적용
   2) 강화 인벤토리에서 드래그하여 유효한 아이템 슬롯에 드롭으로 적용
9. 이미 강화가 적용된 아이템에 새로운 강화를 적용하려 할 경우, 기존 ConfirmModal을 사용해 교체 여부를 물어야 한다.
10. 교체가 확정되면 기존 강화는 폐기되며 인벤토리로 돌아가지 않는다.
11. 강화 인벤토리 선택 해제는 다음을 지원해야 한다.
   1) 같은 강화 항목을 다시 클릭하면 해제
   2) 빈 공간 클릭 시 해제
12. 상점에서 강화 상품을 구매하는 기존 흐름(즉시 적용)은 유지해야 한다.
13. 강화 인벤토리는 런(플레이 세션) 동안만 유지되고 저장/로드는 하지 않는다.
14. 향후 아이템 다중 강화 확장을 고려해 구조를 설계하되, 이번 범위는 기존과 동일하게 “아이템당 강화 1개”를 유지한다.
15. 강화 희귀도 시스템은 아이템과 동일한 `ItemRarity`를 사용하고, 표시/등장 확률만 영향이 있다(가격/효과 영향 없음).

## 5. 비목표(Out of Scope)
- 강화 인벤토리의 UI 배치/레이아웃/디자인 작업(에디터/씬 수정).
- 강화의 영구 저장/로드 기능.
- 업그레이드 구매 시 “보관/적용 선택” 등 흐름 변경.
- 강화 효과/가격 밸런스 변경.

## 6. 디자인 고려사항
- 인벤토리 열기/닫기 버튼은 기능만 제공하고, 실제 배치는 작업 범위에서 제외한다.
- 인벤토리 UI는 ScrollView 기반으로 구성한다.
- 슬롯은 아이콘만 표시하며, 희귀도 색상을 배경에 표시한다(툴팁은 기존 시스템 재사용).
- 선택된 강화가 있을 때 적용 가능한 슬롯 하이라이트를 제공한다.

## 7. 기술 고려사항
- 기존 상점/아이템/강화 시스템과 호환되도록 유지한다.
- 입력은 Input System 기반 로직을 사용한다(레거시 입력 금지).
- 아이템 판매 이벤트에서 “강화 분리 후 인벤토리 이동”을 보장해야 한다.
- 드래그 고스트는 기존 고스트 UI를 재사용한다.
- ConfirmModal은 기존 로직/문구를 유지한다.
- 강화 인벤토리 데이터는 런타임 메모리에서 관리한다.
- 향후 아이템 다중 강화 확장을 대비해, 강화 인벤토리 항목과 적용 로직의 결합도를 낮춘다.

## 8. 성공 지표
- 상점에서 인벤토리 열기/닫기가 정상 동작하고, 일시정지가 정상적으로 적용된다.
- 아이템 판매 시 강화가 유실되지 않고 인벤토리에 보관된다.
- 강화 선택 후 유효 슬롯 하이라이트 및 클릭/드래그 적용이 동작한다.
- 강화가 없는 상태에서 “없음” 메시지가 표시된다.
- ConfirmModal 동작이 기존과 동일하게 유지된다.

## 9. 오픈 질문
- 없음
