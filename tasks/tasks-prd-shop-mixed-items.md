## Relevant Files

- `Assets/Scripts/Shop/ShopManager.cs` - 상점 로직 핵심, 로스터 생성/리롤/구매 흐름 확장.
- `Assets/Scripts/Shop/ShopView.cs` 및 관련 UI 뷰/아이템 뷰 - 상품 목록/정렬/하이라이트/드래그 표시.
- `Assets/Scripts/Shop` 하위(기존 Pin 전용 뷰/로직) - 핀 전용 로직을 공통 상품 모델로 리팩터링.
- `Assets/Scripts/Token/TokenManager.cs`, `Assets/Scripts/Pin/PinManager.cs` - 구매 시 슬롯 하이라이트/배치 처리.
- `Assets/Scripts/Token/TokenDto.cs`, `Assets/StreamingAssets/Data/Tokens.json` - 토큰 데이터/가격/더미 토큰 추가(dummy2~6).
- `Assets/Scripts/Data/LocalizationUtil.cs` 및 로캘 테이블 - 토큰/핀 이름/효과 표시.
- `Assets/Scripts/Data/GameConfig.cs` - 슬롯 수/확률 설정값 추가 검토.
- `Assets/Scripts/Tooltip/*` - 상품 툴팁(이름/효과/가격) 표시.
- `Assets/Scripts/Token/TokenController.cs`, `Assets/Scripts/Pin/PinController.cs` - 하이라이트/드래그 구매 시그널 연결.

### Notes

- 공통 상품 모델(`IShopItem` 등)로 핀/토큰을 추상화하고, 타입별 확률(합 100%) 설정을 반영.
- 토큰 중복 금지: 플레이어 보유 + 로스터 내 중복 체크.
- 슬롯 6개, 타입 enum 순서로 정렬하여 표시.
- UI 하이라이트: 토큰 선택 시 토큰 슬롯만, 핀 선택 시 핀 슬롯만 활성화.
- 로스터 단순화: 토큰 후보 풀이 소진되면 즉시 핀으로 대체(재추첨 없음).

## Tasks

- [ ] 1.0 공통 상품 모델/팩토리 설계(핀/토큰 어댑터, 타입 enum/확률 설정)
  - [x] 1.1 상품 타입 enum 정의 및 확률 설정값 추가(가중치 기반, 기본 50/50 핀/토큰)
  - [x] 1.2 공통 인터페이스/클래스(IShopItem 등) 설계(id, price, icon, tooltip, type)
  - [x] 1.3 핀/토큰 어댑터 구현(기존 PinDto/TokenDto에서 공통 인터페이스로 변환)
  - [x] 1.4 상품 팩토리/빌더 설계(타입 확률 적용, 중복 규칙용 훅 포함)
- [ ] 2.0 로스터 생성 로직 구현(슬롯 6개, 슬롯별 확률 추첨, 토큰 중복 금지, 토큰 풀 소진 시 핀 대체, 타입별 정렬)
  - [x] 2.1 플레이어 보유 토큰 + 로스터 내 토큰 중복 검사 로직 구현
  - [x] 2.2 토큰 후보 풀 생성(중복 제외, 부족 시 스킵) 및 슬롯별 추첨 구현
  - [x] 2.3 공통 로스터 빌더(가중치 기반 타입 선택, 타입 공급자 소진 시 대체 정책 포함) 구현 — 새 상품 타입 추가 시 공급자/가중치만 등록하면 동작하도록
  - [x] 2.4 타입 enum 순으로 정렬하여 최종 로스터 제공
- [ ] 3.0 리롤/갱신 연동(기존 리롤 규칙 공유, 상품 재생성/정렬)
  - [x] 3.1 리롤 시 기존 비용/증가 규칙 유지한 채 로스터 재생성 연결
  - [x] 3.2 로스터/뷰 리프레시(판매 상태 초기화, 정렬 유지)
- [ ] 4.0 구매 UX 확장(선택/드래그 구매, 타입별 하이라이트, 구매 실패 처리: 토큰 덱 가득/핀 기본 슬롯 조건)
  - [x] 4.1 상품 선택 시 타입별 슬롯 하이라이트(토큰 덱 빈 슬롯/핀 기본 슬롯) 및 반대 타입 선택 해제
  - [x] 4.2 드래그/클릭 구매 흐름을 공통 상품으로 처리(성공 시 판매 상태/슬롯 반영)
  - [x] 4.3 구매 실패 처리 및 UI 갱신(토큰 덱 가득, 핀 기본 슬롯 없음 등)
- [ ] 5.0 데이터/로캘 업데이트(Tokens.json 더미 토큰 추가 dummy2~6, 로캘 키 확인)
  - [x] 5.1 Tokens.json에 dummy2~dummy6 토큰 추가(가격/로캘 키, 중복 테스트용)
  - [ ] 5.2 (생략)
- [ ] 6.0 UI 표시/툴팁/가격 반영(공통 상품 뷰, 타입 enum 순 정렬 표시, 툴팁/가격 노출)
  - [ ] 6.1 공통 상품 뷰/슬롯(아이콘/가격/툴팁)로 핀/토큰 모두 표현
  - [ ] 6.2 타입 enum 순 정렬 반영 및 판매 상태 표시
  - [ ] 6.3 툴팁(이름/효과) 공통 처리 ? 가격은 상품 뷰에서만 표시
