# 블럭 스폰 로직 리펙터링 PRD

## 1. 소개/개요
현재 블럭 스폰 로직은 “기본(normal)”과 “큰(big)” 두 패턴만 지원한다. 이를 가중치/비용/특성을 가진 확장 가능한 패턴 시스템으로 대체하여, 런타임 중 패턴 풀과 패턴 속성이 가변적으로 변할 수 있는 구조로 개선한다.

## 2. 목표
- 패턴 기반 스폰 구조로 전면 전환한다.
- 패턴은 가중치(weight), 비용(cost), 특성(trait)을 가진다.
- 가중치 랜덤으로 패턴을 선택한다.
- 비용(cost)은 스폰 예산을 소모하는 기준으로 사용한다.
- 패턴 풀/패턴 데이터는 StreamingAssets의 JSON으로 관리한다.
- 런 전체에서 패턴 풀을 공유한다(스테이지마다 초기화하지 않음).
- 기본 패턴 3종(normal/big/fast)을 제공한다.

## 3. 사용자 스토리
- 플레이어로서, 다양한 특성의 블럭이 등장해 반복감이 줄어들길 원한다.
- 개발자로서, 패턴을 데이터로 추가/변경해 손쉽게 확장하고 싶다.
- 밸런싱 담당자로서, 패턴의 출현 빈도와 비용을 데이터로 조정하고 싶다.

## 4. 기능 요구사항
1. 시스템은 `BlockPattern` 데이터 구조를 제공해야 한다.
2. `BlockPattern`은 최소한 `weight`, `cost`, `traits`를 가져야 한다.
3. 패턴 풀은 JSON(StreamingAssets)에서 로드되어야 한다.
4. 스폰 로직은 기존 로직을 완전히 대체한다.
5. 패턴 선택은 가중치 랜덤으로 수행한다.
6. 스폰 예산(cost) 시스템을 도입한다.
   - 패턴을 먼저 결정하고, 예산이 해당 cost를 감당할 수 있을 때 스폰한다.
   - 예산 누적/증가 규칙은 기존 accumulatedDifficulty 로직과 동일하게 유지한다.
7. 패턴은 traits 대신 명시적인 수치 필드를 사용한다.
   - size, speed, health
   - 명시되지 않은 값은 기본값 1로 간주한다.
8. 기본 패턴 3종을 제공한다.
   - normal: weight 10, cost 1, size 1, speed 1, health 1
   - big: weight 2, cost 4, size 2, speed 1, health 4
   - fast: weight 1, cost 1.5, size 1, speed 2, health 1
9. 런타임 중 패턴 풀 및 패턴 속성 변경을 지원할 수 있는 구조로 설계한다.
   - 이번 작업 범위에서는 실제 변경 이벤트/시점은 구현하지 않는다.

## 5. 비목표(범위 외)
- 블럭 패턴을 UI에서 편집하는 기능
- 패턴별 전용 VFX/스프라이트/색상 시스템
- 밸런스 자동 튜닝 로직

## 6. 디자인/UX 고려사항
- 없음 (UI 변경 없음)

## 7. 기술적 고려사항
- 데이터 로드 경로는 StreamingAssets JSON을 유지한다.
- 기존 스폰 로직을 과감히 정리할 수 있다(불필요한 부분 제거 허용).
- 패턴/예산은 런 전체 공유 상태로 유지한다.

## 8. 성공 지표
- 기존 스폰 로직 없이 패턴 기반으로 정상 스폰된다.
- JSON 수정만으로 패턴 추가/변경이 가능하다.
- 예산(cost)과 가중치(weight)가 정상적으로 반영된다.

## 9. 미해결 질문
- 없음
