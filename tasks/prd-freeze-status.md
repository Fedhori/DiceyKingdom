# PRD: Freeze Status & Snowballer Item

## 1. 소개/개요
블럭에 상태이상(빙결)을 부여해 일정 시간 동안 이동 속도를 감속시키는 시스템을 추가한다. 이를 적용하는 신규 아이템 `item.snowballer`와 투사체 `projectile.snowball`을 제공한다. 향후 점화/중독 등 확장을 고려한 구조를 목표로 한다.

## 2. 목표
- 블럭 상태이상 시스템의 기본 뼈대 구축(확장 가능 구조).
- 빙결 상태이상 적용 및 지속시간 관리.
- `item.snowballer` + `projectile.snowball`로 빙결 적용 루트 제공.
- 빙결 상태 시각 표현(전용 마스크) 제공.

## 3. 사용자 스토리
- 플레이어로서, 빙결 효과가 걸린 블럭의 낙하 속도가 느려지는 것을 보고 싶다.
- 플레이어로서, 눈덩이 투사체로 블럭을 맞추면 빙결이 부여되길 원한다.
- 플레이어로서, 이미 빙결된 블럭에 다시 빙결이 걸릴 때 지속시간이 더 긴 쪽으로 갱신되길 원한다.

## 4. 기능 요구사항
1. 시스템은 블럭에 상태이상을 부여하고 관리할 수 있어야 한다.
2. 상태이상 종류는 확장 가능해야 하며, 현재는 `Freeze`만 구현한다.
3. 빙결 상태는 블럭의 이동속도를 30% 감속(속도 * 0.7)해야 한다.
4. 빙결 상태는 지속시간을 가진다(기본 2초).
5. 빙결이 이미 적용된 블럭에 새 빙결이 들어오면, 남은 시간과 새 시간 중 더 긴 값을 유지해야 한다.
6. 빙결 지속시간 감소는 `Play` 단계에서만 진행된다.
7. `item.snowballer`는 권총과 동일 스펙으로 발사하며, 투사체는 `projectile.snowball`을 사용한다.
8. `projectile.snowball`이 블럭에 피격될 때, 블럭에 피해를 주고 빙결을 적용해야 한다.
9. 빙결 상태인 블럭에는 전용 마스크(시각 효과)가 표시되어야 한다.
10. 아이템 데이터/로컬라이징은 기존 아이템 파이프라인(json → dto → instance → controller)에 맞춰 추가되어야 한다.

## 5. 비목표 (Out of Scope)
- 점화/중독 등 다른 상태이상 구체 구현.
- 상태이상 저항/면역 시스템.
- 빙결 외 상태이상의 지속시간 시스템 일반화(현재는 빙결만 지속시간 보유).

## 6. 디자인 고려사항
- 빙결 시각 효과는 블럭 위에 전용 마스크(오버레이)를 사용한다.
- 마스크 리소스/프리팹은 에디터에서 구성하며 코드에서는 바인딩만 수행한다.

## 7. 기술 고려사항
- 상태이상 정의는 코드 enum 기반으로 진행.
- 블럭 단위로 상태이상 정보를 저장하고, `Play` 중에 지속시간을 감소시킨다.
- 블럭 이동속도 적용은 현재 블럭 이동 로직(낙하 이동)에 상태이상 배율을 곱하는 방식으로 처리한다.
- `projectile.snowball`의 상태이상 적용은 투사체 피격 시점에서 수행한다.

## 8. 성공 지표
- 빙결 적용 시 블럭 낙하가 체감 가능하게 느려짐.
- 빙결 지속시간이 종료되면 원래 속도로 복귀.
- 빙결 중 재적용 시 남은 시간이 더 긴 쪽으로 유지.
- `item.snowballer` 구매 후 플레이 시 빙결이 정상적으로 부여됨.

## 9. 오픈 질문
- 빙결 마스크는 블록 프리팹에 부착되어 있으며, 코드에서는 활성/비활성만 수행한다.
- `projectile.snowball` 프리팹은 `ProjectilePrefabs`에 등록된 것을 사용한다.

