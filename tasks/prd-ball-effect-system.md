## Introduction/Overview

- 볼 전용 효과 시스템을 추가해 Ball이 충돌 시 조건에 따라 점수 배율을 변화시키는 기능을 제공한다.
- 기존에는 Ball 관련 효과 데이터/로직이 없어 확장성이 제한되었으며, Pin 효과 시스템과 유사한 형태로 일관성을 맞춘다.

## Goals

1. Ball 효과 시스템을 Pin과 동일한 1트리거-1컨디션-N효과 구조로 구현한다.
2. 효과 데이터는 `StreamingAssets/Data/Balls.json`에 정의하고, BallDto/BallInstance에서 해석·적용한다.
3. 두 가지 효과를 데이터 기반으로 동작시키고 로컬라이징까지 대응한다.
   - (a) Ball이 다른 Ball과 충돌 시, 충돌한 상대 Ball의 점수 배율이 +1 증가.
   - (b) Ball이 Pin과 충돌 시, 자기 자신의 점수 배율이 +1 증가.

## User Stories

- 플레이어는 특수 효과가 있는 Ball을 선택/획득하면 충돌 결과가 강화되어 더 높은 점수를 낼 수 있다.
- 디자이너는 Pins와 동일한 방식으로 Balls.json에 효과를 정의/튜닝해도 게임 로직이 일관되게 동작한다.

## Functional Requirements

1. 데이터 모델
   1.1 Balls.json에 Pin 효과 구조와 동일한 필드(트리거, 컨디션, 효과 리스트 등)를 추가한다.  
   1.2 BallDto에 효과 목록을 직렬화/역직렬화할 수 있는 필드를 추가한다.  
   1.3 BallRepository/StaticDataManager는 새 필드를 정상 로드하도록 유지한다.
2. 런타임 적용
   2.1 BallInstance에 PinInstance와 동일한 효과 평가 파이프라인을 추가한다(1트리거-1컨디션-N효과 실행).  
   2.2 트리거는 최소한 Ball-Pin 충돌, Ball-Ball 충돌을 지원하며 Pin과 같은 우선순위/순서 규칙을 따른다(특별 규칙 없음).  
   2.3 효과 실행 시 점수 배율 증가 등의 수치를 반영하고, 동일 런 중 누적/스택을 허용한다(특별 제한 없음).  
3. 요구 효과 정의
   3.1 Ball-Ball 충돌: 충돌 대상 Ball의 점수 배율을 +1 증가시키는 효과를 데이터로 정의한다.  
   3.2 Ball-Pin 충돌: 자기 자신의 점수 배율을 +1 증가시키는 효과를 데이터로 정의한다.  
   3.3 위 두 효과가 실제 플레이에서 데이터 기반으로 발동/누적되는지 검증 가능해야 한다.
4. 로컬라이징/툴팁
   4.1 Pin 효과 로컬라이징 흐름을 참조해 Ball 효과에도 동일한 키/포맷을 확장한다(예: Tooltip/Description 문자열 대체).  
   4.2 필요한 신규 문자열 키를 추가하고, Ball 효과 툴팁이 올바른 값/변수를 노출하도록 한다.
5. 테스트/검증
   5.1 에디터/플레이 모드에서 수동으로 Ball-Pin, Ball-Ball 충돌 상황을 만들어 효과 발동과 배율 변화가 일어나는지 확인한다.  
   5.2 레이스 조건이나 예외 발생 시 로그로 진단 가능해야 한다(필요 최소한).

## Non-Goals (Out of Scope)

- 새로운 UI/FX/애니메이션 추가나 아트 에셋 변경.
- Pin 효과 시스템 자체의 리팩터링/확장.
- 네트워크/멀티플레이 지원.

## Design Considerations

- 기존 Pin 효과 시스템과 최대한 동일한 데이터/코드 구조를 사용해 유지보수성을 높인다.
- 중복 코드가 발생하면 공용 유틸/추상화로 묶는 것을 고려하되, Pin 쪽 기존 동작은 변경하지 않는다.

## Technical Considerations

- Balls.json 스키마 변경 시 기존 필드와 호환되도록 기본값/역직렬화 예외 처리를 넣는다.
- 효과 적용 지점: BallInstance.OnHitPin, BallInstance.OnHitBall 등 충돌 이벤트 흐름에 후킹한다.
- 점수 배율 변경은 런타임 누적을 허용하며, 필요 시 클램프/리셋 규칙을 Pin과 동일하게 맞춘다.
- 로컬라이징: Pin 효과 문자열 포맷을 재사용하고 Ball 전용 키만 추가한다.

## Success Metrics

- 플레이 모드에서 두 가지 효과가 JSON 설정만으로 발동/누적되고 점수 배율에 반영된다.
- 툴팁/로컬라이징이 Ball 효과 값과 일치한다.

## Open Questions

- 트리거/컨디션/효과 필드명을 Pin과 완전히 동일하게 재사용해도 되는지(미응답 시 Pin과 동일로 진행).
